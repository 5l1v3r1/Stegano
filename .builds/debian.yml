image: debian/sid
sources:
  - https://git.sr.ht/~cedric/Stegano
packages:
  - python3
  - python3-dev
  - python3-pip
tasks:
  - build: |
      pip3 install pipenv
      PATH=$PATH:/home/build/.local/bin
      pipenv install
      pipenv install --dev
  - test: |
      PATH=$PATH:/home/build/.local/bin
      pipenv shell
      nosetests --with-coverage --cover-package=stegano
  - typecheck: |
      python tools/run_mypy.py
